<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 800" width="1000" height="800">
  <!-- Background -->
  <rect width="1000" height="800" fill="#f8f9fa" rx="10" ry="10"/>
  
  <!-- Title -->
  <text x="500" y="40" font-family="Arial" font-size="24" text-anchor="middle" font-weight="bold" fill="#333">SQL Chat Assistant - System Architecture</text>
  
  <!-- Client Layer -->
  <rect x="50" y="100" width="900" height="100" rx="10" ry="10" fill="#e3f2fd" stroke="#2196f3" stroke-width="2"/>
  <text x="500" y="130" font-family="Arial" font-size="18" text-anchor="middle" font-weight="bold" fill="#1565c0">Client Layer</text>
  
  <!-- Client Components -->
  <rect x="100" y="150" width="160" height="40" rx="5" ry="5" fill="#bbdefb" stroke="#1e88e5" stroke-width="1"/>
  <text x="180" y="175" font-family="Arial" font-size="14" text-anchor="middle" fill="#0d47a1">Web Browser</text>
  
  <rect x="300" y="150" width="160" height="40" rx="5" ry="5" fill="#bbdefb" stroke="#1e88e5" stroke-width="1"/>
  <text x="380" y="175" font-family="Arial" font-size="14" text-anchor="middle" fill="#0d47a1">Chat Interface</text>
  
  <rect x="500" y="150" width="160" height="40" rx="5" ry="5" fill="#bbdefb" stroke="#1e88e5" stroke-width="1"/>
  <text x="580" y="175" font-family="Arial" font-size="14" text-anchor="middle" fill="#0d47a1">Visualization</text>
  
  <rect x="700" y="150" width="160" height="40" rx="5" ry="5" fill="#bbdefb" stroke="#1e88e5" stroke-width="1"/>
  <text x="780" y="175" font-family="Arial" font-size="14" text-anchor="middle" fill="#0d47a1">IndexedDB Storage</text>
  
  <!-- API Layer -->
  <rect x="50" y="250" width="900" height="100" rx="10" ry="10" fill="#e8f5e9" stroke="#4caf50" stroke-width="2"/>
  <text x="500" y="280" font-family="Arial" font-size="18" text-anchor="middle" font-weight="bold" fill="#2e7d32">API Layer</text>
  
  <!-- API Components -->
  <rect x="100" y="300" width="160" height="40" rx="5" ry="5" fill="#c8e6c9" stroke="#43a047" stroke-width="1"/>
  <text x="180" y="325" font-family="Arial" font-size="14" text-anchor="middle" fill="#1b5e20">FastAPI Backend</text>
  
  <rect x="300" y="300" width="160" height="40" rx="5" ry="5" fill="#c8e6c9" stroke="#43a047" stroke-width="1"/>
  <text x="380" y="325" font-family="Arial" font-size="14" text-anchor="middle" fill="#1b5e20">Query Endpoint</text>
  
  <rect x="500" y="300" width="160" height="40" rx="5" ry="5" fill="#c8e6c9" stroke="#43a047" stroke-width="1"/>
  <text x="580" y="325" font-family="Arial" font-size="14" text-anchor="middle" fill="#1b5e20">Result Endpoint</text>
  
  <rect x="700" y="300" width="160" height="40" rx="5" ry="5" fill="#c8e6c9" stroke="#43a047" stroke-width="1"/>
  <text x="780" y="325" font-family="Arial" font-size="14" text-anchor="middle" fill="#1b5e20">Visualization API</text>
  
  <!-- Processing Layer -->
  <rect x="50" y="400" width="900" height="100" rx="10" ry="10" fill="#fff3e0" stroke="#ff9800" stroke-width="2"/>
  <text x="500" y="430" font-family="Arial" font-size="18" text-anchor="middle" font-weight="bold" fill="#e65100">Processing Layer</text>
  
  <!-- Processing Components -->
  <rect x="100" y="450" width="160" height="40" rx="5" ry="5" fill="#ffe0b2" stroke="#fb8c00" stroke-width="1"/>
  <text x="180" y="475" font-family="Arial" font-size="14" text-anchor="middle" fill="#e65100">Celery Workers</text>
  
  <rect x="300" y="450" width="160" height="40" rx="5" ry="5" fill="#ffe0b2" stroke="#fb8c00" stroke-width="1"/>
  <text x="380" y="475" font-family="Arial" font-size="14" text-anchor="middle" fill="#e65100">Task Queue</text>
  
  <rect x="500" y="450" width="160" height="40" rx="5" ry="5" fill="#ffe0b2" stroke="#fb8c00" stroke-width="1"/>
  <text x="580" y="475" font-family="Arial" font-size="14" text-anchor="middle" fill="#e65100">SQL Agent</text>
  
  <rect x="700" y="450" width="160" height="40" rx="5" ry="5" fill="#ffe0b2" stroke="#fb8c00" stroke-width="1"/>
  <text x="780" y="475" font-family="Arial" font-size="14" text-anchor="middle" fill="#e65100">LangGraph Workflow</text>
  
  <!-- Core Layer -->
  <rect x="50" y="550" width="900" height="100" rx="10" ry="10" fill="#f3e5f5" stroke="#9c27b0" stroke-width="2"/>
  <text x="500" y="580" font-family="Arial" font-size="18" text-anchor="middle" font-weight="bold" fill="#6a1b9a">Core Layer</text>
  
  <!-- Core Components -->
  <rect x="100" y="600" width="160" height="40" rx="5" ry="5" fill="#e1bee7" stroke="#8e24aa" stroke-width="1"/>
  <text x="180" y="625" font-family="Arial" font-size="14" text-anchor="middle" fill="#4a148c">LLM Integration</text>
  
  <rect x="300" y="600" width="160" height="40" rx="5" ry="5" fill="#e1bee7" stroke="#8e24aa" stroke-width="1"/>
  <text x="380" y="625" font-family="Arial" font-size="14" text-anchor="middle" fill="#4a148c">SQL Generation</text>
  
  <rect x="500" y="600" width="160" height="40" rx="5" ry="5" fill="#e1bee7" stroke="#8e24aa" stroke-width="1"/>
  <text x="580" y="625" font-family="Arial" font-size="14" text-anchor="middle" fill="#4a148c">Conversation Memory</text>
  
  <rect x="700" y="600" width="160" height="40" rx="5" ry="5" fill="#e1bee7" stroke="#8e24aa" stroke-width="1"/>
  <text x="780" y="625" font-family="Arial" font-size="14" text-anchor="middle" fill="#4a148c">Result Formatting</text>
  
  <!-- Infrastructure Layer -->
  <rect x="50" y="700" width="900" height="70" rx="10" ry="10" fill="#ffebee" stroke="#f44336" stroke-width="2"/>
  <text x="500" y="730" font-family="Arial" font-size="18" text-anchor="middle" font-weight="bold" fill="#b71c1c">Infrastructure Layer</text>
  
  <!-- Infrastructure Components -->
  <rect x="100" y="750" width="120" height="40" rx="5" ry="5" fill="#ffcdd2" stroke="#e53935" stroke-width="1"/>
  <text x="160" y="775" font-family="Arial" font-size="14" text-anchor="middle" fill="#b71c1c">PostgreSQL</text>
  
  <rect x="260" y="750" width="120" height="40" rx="5" ry="5" fill="#ffcdd2" stroke="#e53935" stroke-width="1"/>
  <text x="320" y="775" font-family="Arial" font-size="14" text-anchor="middle" fill="#b71c1c">Redis Cache</text>
  
  <rect x="420" y="750" width="120" height="40" rx="5" ry="5" fill="#ffcdd2" stroke="#e53935" stroke-width="1"/>
  <text x="480" y="775" font-family="Arial" font-size="14" text-anchor="middle" fill="#b71c1c">Docker</text>
  
  <rect x="580" y="750" width="120" height="40" rx="5" ry="5" fill="#ffcdd2" stroke="#e53935" stroke-width="1"/>
  <text x="640" y="775" font-family="Arial" font-size="14" text-anchor="middle" fill="#b71c1c">Prometheus</text>
  
  <rect x="740" y="750" width="120" height="40" rx="5" ry="5" fill="#ffcdd2" stroke="#e53935" stroke-width="1"/>
  <text x="800" y="775" font-family="Arial" font-size="14" text-anchor="middle" fill="#b71c1c">Grafana</text>
  
  <!-- Connections -->
  <!-- Client to API -->
  <path d="M500 200 L500 250" stroke="#2196f3" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  
  <!-- API to Processing -->
  <path d="M500 350 L500 400" stroke="#4caf50" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  
  <!-- Processing to Core -->
  <path d="M500 500 L500 550" stroke="#ff9800" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  
  <!-- Core to Infrastructure -->
  <path d="M500 650 L500 700" stroke="#9c27b0" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  
  <!-- LLM to External -->
  <path d="M100 625 L50 625 L50 400 L20 400" stroke="#9c27b0" stroke-width="2" stroke-dasharray="5,5" fill="none" marker-end="url(#arrowhead)"/>
  <text x="15" y="380" font-family="Arial" font-size="14" text-anchor="middle" fill="#4a148c" transform="rotate(-90 15,380)">External LLM API</text>
  
  <!-- Arrow Marker -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#333"/>
    </marker>
  </defs>
  
  <!-- Legend -->
  <rect x="800" y="50" width="15" height="15" fill="#e3f2fd" stroke="#2196f3" stroke-width="1"/>
  <text x="820" y="62" font-family="Arial" font-size="12" fill="#333">Client</text>
  
  <rect x="800" y="70" width="15" height="15" fill="#e8f5e9" stroke="#4caf50" stroke-width="1"/>
  <text x="820" y="82" font-family="Arial" font-size="12" fill="#333">API</text>
  
  <rect x="880" y="50" width="15" height="15" fill="#fff3e0" stroke="#ff9800" stroke-width="1"/>
  <text x="900" y="62" font-family="Arial" font-size="12" fill="#333">Processing</text>
  
  <rect x="880" y="70" width="15" height="15" fill="#f3e5f5" stroke="#9c27b0" stroke-width="1"/>
  <text x="900" y="82" font-family="Arial" font-size="12" fill="#333">Core</text>
  
  <rect x="940" y="50" width="15" height="15" fill="#ffebee" stroke="#f44336" stroke-width="1"/>
  <text x="960" y="62" font-family="Arial" font-size="12" fill="#333">Infrastructure</text>
</svg>